{% extends "base.html" %}

{% block content %}

<br><br>
{% if current_user.is_authenticated %}
<h2>My Feedback for Products:</h2>
<style>
  .dropdown {
    display: inline-block;
    position: relative;
  }
  .dropdown-content {
    display: none;
    position: absolute;
    width: 100%;
    overflow: auto;
    box-shadow: 0px 10px 10px 0px rgba(0,0,0,0.4);
  }
  .dropdown:hover .dropdown-content {
    display: block;
  }
  .dropdown-content a {
    display: block;
    background-color: #ffffff;
    color: #000000;
    padding: 5px;
    text-decoration: none;
  }
  .dropdown-content a:hover {
    color: #FFFFFF;
    background-color: #137a56;
  }
  </style>
  </head>
  <body style="background-color:white;">
  
  <div class="dropdown">
    <button>View Options</button>
    <div class="dropdown-content">
      <a href="{{ url_for('productfeedback.pfeedback_uid_sorted_date') }}">Sort By Date</a>
      <a href="{{ url_for('productfeedback.pfeedback_uid_sorted_date_top5') }}">Five Most Recent</a>
      <a href="{{ url_for('productfeedback.pfeedback_uid_sorted_rating') }}">Sort By Rating</a>
    </div>
  </div>
  <br><br>

<table class='table table-hover table-bordered container'>
  <thead class="thead-dark">
    <tr>
      <th scope="col">Product ID</th>
      <th scope="col">Rating</th>
      <th scope="col">Review</th>
      <th scope="col">Time Added</th>
    </tr>
  </thead>
  <tbody>
    {% for item in items %}
      <tr>
        <td>{{item.pid}}</td>
        <td>{{item.rating}}</td>
        <td>{{item.review}}</td>
        <td>{{humanize_time(item.date_time)}}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p><a href="{{ url_for('users.login') }}">Log in</a> to see your ratings and reviews!</p>
{% endif %}

{% endblock %}
