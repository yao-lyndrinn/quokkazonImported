{% extends "base.html" %}

{% block content %}

<!DOCTYPE html>
<html>
{% if search_term == "" %}
    <p style= "margin-top: 10px; padding-left: 25px">Showing all {{len_products}} products</p>
{% else %}
    <p style= "margin-top: 10px; padding-left: 25px">Showing {{len_products}} search results for "{{search_term}}"</p>
{% endif %}

<script>
  $(document).ready(function(){
    $('#sortable').DataTable({
      "bFilter": false,  
      "oLanguage": {     
        "sInfo": "Showing _START_ to _END_ of _TOTAL_ entries",
        "sInfoEmpty": "Showing 0 to 0 of 0 entries",
        "sEmptyTable": "No data available in table"
      }
    });
  });
</script>
<table class='table table-hover table-bordered container' id='sortable'>
    <thead class="quokka-brown">
      <tr>
        <th scope="col">Product ID</th>
        <th scope="col">Product Name</th>
        <th scope="col">Prices</th>
        <th scope="col">Add To Wishlist</th>
        <th scope="col">View Sellers</th>
      </tr>
    </thead>
    <tbody>
      {% for product in items%}
        <tr>
          <td>{{product.pid}}</td>
          <td><a href="{{ url_for('products.product_detail', product_id=product.pid,option=0) }}">{{product.name}}</a></td>
          <td>
            {% if product.pid in product_prices %}
              {%for price in product_prices[product.pid]%}
                ${{ price }}
              {% endfor %}
            {% else %}
              Not in stock
            {% endif %}
            <p>Rating: {{summary[0]}} by {{summary[1]}} users</p>
          </td>
          {% if current_user.is_authenticated %}
          <td>
            <form action="{{ url_for('wishlist.wishlist_add', product_id=product.pid) }}"
                  method="POST">
                  <input type="submit" value="Add to Wishlist"/> 
            </form>
            {% if is_seller%}
            <form action="{{ url_for('inventory.add', product_id=product.pid) }}" method="POST">
              <input type="submit" value="Inventory"/> 
            </form>
            {% endif %}
          </td>
          <td>
            <form action="{{ url_for('cart.cart_select', product_id=product.pid)}}"
                  method="POST">
                  <input type="submit" value="View"/> 
            </form>
          </td>
          {% endif %}
        </tr>
      {% endfor %}
    </tbody>
  </table>
</html>

{% endblock %}